<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Interactive component-1 | Crime Visualization in New York City</title>
  <meta name="description" content="Chapter 7 Interactive component-1 | Crime Visualization in New York City" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Interactive component-1 | Crime Visualization in New York City" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Interactive component-1 | Crime Visualization in New York City" />
  
  
  

<meta name="author" content="Zihao Zhang/ Yunshu Cai/ Moya Zhu" />


<meta name="date" content="2021-12-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="interactive-component.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Crime visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#column-pattern"><i class="fa fa-check"></i><b>4.1</b> Column pattern</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="interactive-component.html"><a href="interactive-component.html#interactive-map"><i class="fa fa-check"></i><b>6.0.1</b> interactive map</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="interactive-component-1.html"><a href="interactive-component-1.html"><i class="fa fa-check"></i><b>7</b> Interactive component-1</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="interactive-component-1.html"><a href="interactive-component-1.html#wordcloud"><i class="fa fa-check"></i><b>7.0.1</b> Wordcloud</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>8</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime Visualization in New York City</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component-1" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Interactive component-1</h1>
<div id="wordcloud" class="section level3" number="7.0.1">
<h3><span class="header-section-number">7.0.1</span> Wordcloud</h3>
This wordCloud reflect desxription of the top 5 crime type
<meta charset="utf-8">
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<!-- Load d3-cloud -->
<script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3.layout.cloud.js"></script>
<!-- Initialize a select button -->
<p><select id="selectButton"></select></p>
<!-- Create a div where the graph will take place -->
<div id="my_dataviz">

</div>
<script>
    var allGroup = ["ASSAULT 3 & RELATED OFFENSES", "CRIMINAL MISCHIEF & RELATED OF", "GRAND LARCENY",
    "HARRASSMENT 2","PETIT LARCENY"]

    // add the options to the button
    d3.select("#selectButton")
      .selectAll('myOptions')
        .data(allGroup)
      .enter()
        .append('option')
      .text(function (d) { return d; }) // text showed in the menu
      .attr("value", function (d) { return d; }) // corresponding value returned by the button
   var fill = d3.scaleOrdinal(d3.schemeCategory20);
   var margin = {top: 10, right: 10, bottom: 10, left: 10},
        width = 450 - margin.left - margin.right,
        height = 450 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

    var myWords=getWords("ASSAULT 3 & RELATED OFFENSES");


    var layout = d3.layout.cloud()
      .size([width, height])
      .words(myWords.map(function(d) { return {text: d.word, size:d.size}; }))
      .padding(5)        //space between words
      .rotate(function() { return ~~(Math.random() * 2) * 90; })
      .fontSize(function(d) { return d.size; })      // font size of words
      .on("end", draw);

    layout.start();

    function getWords(select_group){
      var found = null;
      var word_freq=[{OFNS_DESC: "ASSAULT 3 & RELATED OFFENSES", con_str: [{"word": "OBSTR", "size": 26.57928032795182}, {"word": "BREATH", "size": 26.57928032795182}, {"word": "CIRCUL", "size": 26.57928032795182}, {"word": "ASSAULT", "size": 120.0}, {"word": "MENACING", "size": 39.046173051942574}, {"word": "UNCLASSIFIED", "size": 38.954231826846836}, {"word": "PEACE", "size": 20.0}, {"word": "OFFICER", "size": 20.0}]}, {"OFNS_DESC": "CRIMINAL MISCHIEF & RELATED OF", "con_str": [{"word": "MISCHIEF", "size": 117.47163787697394}, {"word": "CRIMINAL", "size": 120.0}, {"word": "OF", "size": 59.82312866997321}, {"word": "MOTOR", "size": 49.222963343024915}, {"word": "TH", "size": 40.44852060885924}, {"word": "GRAFFIT", "size": 40.44852060885924}, {"word": "UNCLASSIFIED", "size": 45.70121429793056}, {"word": "M", "size": 30.35074967219657}, {"word": "UNCL", "size": 30.57949945841172}, {"word": "ND", "size": 30.57949945841172}, {"word": "BY", "size": 21.117382133287727}, {"word": "FIRE", "size": 21.042557436862207}, {"word": "MIS", "size": 20.933527164927884}, {"word": "RECKLESS", "size": 20.232312866997322}, {"word": "ENDANGERMENT", "size": 20.232312866997322}, {"word": "PROPE", "size": 20.232312866997322}, {"word": "TAMPERING", "size": 21.577732170343765}, {"word": "FALSE", "size": 20.01567755544154}, {"word": "ALARM", "size": 20.01567755544154}, {"word": "FIR", "size": 20.090502251867054}, {"word": "EXPLOSIVE", "size": 20.0}]}, {OFNS_DESC: "GRAND LARCENY", con_str: [{"word": "LARCENY", "size": 120.0}, {"word": "GRAND", "size": 120.0}, {"word": "FROM", "size": 77.9096730986564}, {"word": "STORE", "size": 29.21853417604956}, {"word": "SHOPL", "size": 26.811770122640326}, {"word": "RESIDENCE", "size": 32.83077309447072}, {"word": "UNATTENDED", "size": 46.48445021137667}, {"word": "VEHICLE", "size": 32.76798794525135}, {"word": "MOTORCYCLE", "size": 35.85785442216734}, {"word": "PERSON", "size": 38.56598719182956}, {"word": "PICK", "size": 22.399229835502908}, {"word": "UNCL", "size": 21.583022895651084}, {"word": "OF", "size": 32.40132267381022}, {"word": "BICYCLE", "size": 24.855384872964713}, {"word": "OPEN", "size": 33.609308944790925}, {"word": "AREAS", "size": 27.283914444769998}, {"word": "BY", "size": 53.766690385500816}, {"word": "ACQUIRING", "size": 24.34389519065757}, {"word": "LOST", "size": 23.054706793353144}, {"word": "CREDIT", "size": 32.56121552048889}, {"word": "CARD", "size": 32.56121552048889}, {"word": "IDENTITY", "size": 20.773513038382653}, {"word": "THEFT", "size": 26.255075132895232}, {"word": "UNCLASSIFIED", "size": 22.4996860742539}, {"word": "DISHONEST", "size": 21.322673810221424}, {"word": "EMP", "size": 21.322673810221424}, {"word": "BAG", "size": 22.131346532166923}, {"word": "DIP", "size": 22.131346532166923}, {"word": "EATERY", "size": 22.326399062408438}, {"word": "VEHICULAR", "size": 23.08902934159307}, {"word": "ACCESSORIES", "size": 23.08902934159307}, {"word": "RETAIL", "size": 22.40592691808631}, {"word": "COMPROMISE", "size": 31.16822234314177}, {"word": "CELL", "size": 21.768029802017494}, {"word": "PHONE", "size": 21.768029802017494}, {"word": "ACCT", "size": 36.41371227658951}, {"word": "EXISTING", "size": 22.82030890293416}, {"word": "BUILDING", "size": 27.728433301243147}, {"word": "NON", "size": 26.688711230170355}, {"word": "BANK", "size": 26.759030597296054}, {"word": "REPRODUCED", "size": 22.151437779917124}, {"word": "CHECK", "size": 22.151437779917124}, {"word": "FALSE", "size": 26.35971704826085}, {"word": "PROMISE", "size": 26.35971704826085}, {"word": "IN", "size": 26.35971704826085}, {"word": "CONTACT", "size": 26.35971704826085}, {"word": "PERSONAL", "size": 23.385375245908502}, {"word": "ELECTRONIC", "size": 23.385375245908502}, {"word": "DEVICE", "size": 23.385375245908502}, {"word": "SNATCH", "size": 23.385375245908502}, {"word": "ATM", "size": 21.55372315934871}, {"word": "TRANSACTION", "size": 21.552886024025785}, {"word": "NEW", "size": 22.242685530115942}, {"word": "NOT", "size": 25.10485119919635}, {"word": "LUSH", "size": 21.32937089280482}, {"word": "WORKER", "size": 21.32937089280482}, {"word": "SLEEPING", "size": 21.32937089280482}, {"word": "UNCON", "size": 21.32937089280482}, {"word": "VICTIM", "size": 21.32937089280482}, {"word": "PURS", "size": 21.010422334770414}, {"word": "NECK", "size": 20.361642459503578}, {"word": "CHAI", "size": 20.361642459503578}, {"word": "EXTORTION", "size": 22.928299359591477}, {"word": "LOS", "size": 21.2883512619815}, {"word": "UNAUTHORIZED", "size": 20.459587292285796}, {"word": "PURCHASE", "size": 20.459587292285796}, {"word": "TELLER", "size": 20.685613829475535}, {"word": "PACKAGE", "size": 21.038884935749863}, {"word": "INSIDE", "size": 20.72077351303838}, {"word": "NIGHT", "size": 21.429827131555815}, {"word": "CLUB", "size": 21.429827131555815}, {"word": "TRUCK", "size": 20.133104516345067}, {"word": "OUTSIDE", "size": 20.317274287388557}, {"word": "BOAT", "size": 20.0301368716253}, {"word": "PIER", "size": 20.051902390021347}, {"word": "AGGRAVATED", "size": 20.0}]}, {OFNS_DESC: "HARRASSMENT 2", con_str: [{"word": "HARASSMENT", "size": 120.0}, {"word": "SUBD", "size": 120.0}, {"word": "CIVILIAN", "size": 20.0}]}, {OFNS_DESC: "PETIT LARCENY", con_str: [{"word": "LARCENY", "size": 120.0}, {"word": "PETIT", "size": 120.0}, {"word": "FROM", "size": 103.38615819319438}, {"word": "AUTO", "size": 33.71205696486984}, {"word": "BY", "size": 24.13479914177515}, {"word": "ACQUIRING", "size": 20.799602934222303}, {"word": "LOS", "size": 20.799602934222303}, {"word": "OPEN", "size": 28.340726208295393}, {"word": "AREAS", "size": 28.340726208295393}, {"word": "STORE", "size": 56.585546962016906}, {"word": "SHOPL", "size": 56.585546962016906}, {"word": "OF", "size": 32.46028365191088}, {"word": "LICENSE", "size": 24.268457110252193}, {"word": "PLATE", "size": 24.268457110252193}, {"word": "BICYCLE", "size": 24.72883455722867}, {"word": "BUILDING", "size": 44.14089582103902}, {"word": "UN", "size": 36.15854492588235}, {"word": "FALSE", "size": 21.833693532439415}, {"word": "PROMISE", "size": 21.833693532439415}, {"word": "VEHICLE", "size": 23.350828718485836}, {"word": "ACCES", "size": 23.350828718485836}, {"word": "CHECK", "size": 20.74332589486355}, {"word": "MAILB", "size": 20.353294747085513}, {"word": "UNATTENDED", "size": 27.972971388596864}, {"word": "PACKAGE", "size": 27.972971388596864}, {"word": "THEFT", "size": 27.972971388596864}, {"word": "INSIDE", "size": 25.64177319571513}, {"word": "OUTSIDE", "size": 22.321818686321944}, {"word": "CREDIT", "size": 20.57410396401396}, {"word": "CARD", "size": 20.57410396401396}, {"word": "U", "size": 20.57410396401396}, {"word": "DISHONEST", "size": 20.509229043642062}, {"word": "EMP", "size": 20.509229043642062}, {"word": "TRUCK", "size": 20.16609542866299}, {"word": "USE", "size": 20.380651641218243}, {"word": "ANIMAL", "size": 20.082070682398182}, {"word": "COIN", "size": 20.01328763429304}, {"word": "MACHIN", "size": 20.01328763429304}, {"word": "BOAT", "size": 20.0}, {"word": "PIER", "size": 20.001172438319973}]}]
      for(var i = 0; i < word_freq.length; i++){
        var e = word_freq[i];
        if(e.OFNS_DESC == select_group){
            found = e.con_str;
        }
      }
      return found;
    }

    function update(select_group) {
        var update_data=getWords(select_group);
      // Create new data with the selection?
      // Give these new data to update line
      layout.stop();

     layout = d3.layout.cloud()
      .size([width, height])
      .words(update_data.map(function(d) { return {text: d.word, size:d.size}; }))
      .padding(5)        //space between words
      .rotate(function() { return ~~(Math.random() * 2) * 90; })
      .fontSize(function(d) { return d.size; })      // font size of words
      .on("end", draw);
    layout.start();
    }

    // When the button is changed, run the updateChart function
    d3.select("#selectButton").on("change", function(d) {
        // recover the option that has been chosen
        var selectedOption = d3.select(this).property("value")
        // run the updateChart function with this selected option
        d3.selectAll("svg").remove();

     svg = d3.select("#my_dataviz").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");
        update(selectedOption);
    })




// List of words
// set the dimensions and margins of the graph


// Constructs a new cloud layout instance. It run an algorithm to find the position of words that suits your requirements
// Wordcloud features that are different from one word to the other must be here

// This function takes the output of 'layout' above and draw the words
// Wordcloud features that are THE SAME from one word to the other can be here
function draw(words) {
  svg
    .append("g")
      .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
      .selectAll("text")
        .data(words)
      .enter()
      .append("text")
        .style("font-size", function(d) { return d.size; })
        .style("fill", function(d,i) { return fill(i)})
        .attr("text-anchor", "middle")
        .style("font-family", "Impact")
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
}
</script>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="interactive-component.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/WALLERR/nyc_crime_visualization/edit/main/06-interactive1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/WALLERR/nyc_crime_visualization/blob/main/06-interactive1.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
